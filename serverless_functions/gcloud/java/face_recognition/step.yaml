- prepareInput:
    assign:
      - image_analyze_url_start: __PLACEHOLDER__
      - image_to_analize: ?url=https://image.shutterstock.com/image-photo/beautiful-calm-face-young-woman-260nw-1493659754.jpg
      - image_analyze_url: ${image_analyze_url_start + image_to_analize}
- analyzeImage:
    call: http.get
    args:
      url: ${image_analyze_url}
    result: FaceRecognitionResult
- conditionalFaceSwitch:
    switch:
      - condition: ${FaceRecognitionResult.body == "Error"}
        next: error
      - condition: ${FaceRecognitionResult.body == "face"}
        next: prepareAnger
    next: notFace
- prepareAnger:
    assign:
      - face_analyze_url_start: __PLACEHOLDER__
      - face_analyze_url: ${face_analyze_url_start + image_to_analize}
- detectAnger:
    call: http.get
    args:
      url: ${face_analyze_url}
    result: AngerRecognitionResult
- conditionalAngerSwitch:
    switch:
      - condition: ${AngerRecognitionResult.body == "Error"}
        next: error
      - condition: ${AngerRecognitionResult.body == "true"}
        next: angry
    next: calm
- notFace:
    return: "The image you provided does not contain a face"
- error:
    return: "An error occurred, please check passed image url"
- calm:
    return: "There is no angry person in the image"
- angry:
    return: "Anger detected"